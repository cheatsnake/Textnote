(this["webpackJsonpnote-app"]=this["webpackJsonpnote-app"]||[]).push([[0],{41:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},63:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(33),r=n.n(s),i=n(12),o=n(2),l=n(8),u=n.n(l),d=n(13),j=n(35),b=n(4),p=n(21),h=n.n(p),O=n(11),m=n(10),x=(n(41),n(0)),f=function(e){var t=e.activeNote,n=e.onEdit,a=e.menuActive,c=function(e,a){var c;n(Object(m.a)(Object(m.a)({},t),{},(c={},Object(O.a)(c,e,a),Object(O.a)(c,"time",Date.now()),c)))};return t?Object(x.jsxs)("div",{className:a?"editor":"editor editor_full",children:[Object(x.jsx)("input",{className:"editor__title",type:"text",placeholder:"Title",maxLength:"32",value:t.title,onChange:function(e){return c("title",e.target.value)}}),Object(x.jsx)("textarea",{className:"editor__area",name:"text",placeholder:"Type something...",id:"text",value:t.body,onChange:function(e){return c("body",e.target.value)}})]}):Object(x.jsx)("div",{className:a?"editor editor_empty":"editor editor_empty editor_full",children:Object(x.jsx)("div",{className:"no__note",children:"Select or create a note"})})},v=(n(43),n(44),n.p+"static/media/add.f8eed078.svg"),g=n.p+"static/media/delete.f82aad06.svg",_=n.p+"static/media/menu.0c7a62dc.svg",N=n.p+"static/media/logout.9b3f4199.svg",w=Object(a.createContext)(),y=function(e){var t=e.notes,n=e.addNote,c=e.delNote,s=e.active,r=e.setActive,i=e.menuActive,o=e.setMenuActive,l=t.sort((function(e,t){return t.time-e.time})),u=Object(a.useState)(""),d=Object(b.a)(u,2),j=d[0],p=d[1],h=Object(a.useContext)(w).logout;var O=l.filter((function(e){return e.title.toLowerCase().includes(j.toLocaleLowerCase())||e.body.toLowerCase().includes(j.toLocaleLowerCase())}));return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return o()},className:"btn btn_menu",children:Object(x.jsx)("img",{src:_,alt:""})}),Object(x.jsxs)("div",{className:i?"note-list":"note-list note-list_off",children:[Object(x.jsxs)("div",{className:"note-list__header",children:[Object(x.jsx)("div",{className:"note-list__inner",children:Object(x.jsx)("h2",{children:"Textnote"})}),Object(x.jsx)("button",{className:"btn btn_add",onClick:n,children:Object(x.jsx)("img",{src:v,alt:""})})]}),Object(x.jsx)("div",{className:"note-list__search",children:Object(x.jsx)("input",{type:"text",placeholder:"Type to search note",className:"search",onChange:function(e){return p(e.target.value)}})}),Object(x.jsx)("div",{className:"note-list__lists",children:O.map((function(e){return Object(x.jsxs)("div",{className:"note-list__item ".concat(e.id===s&&"active"),onClick:function(){return t=e.id,r(t),void(window.innerWidth<768&&o(!1));var t},children:[Object(x.jsx)("div",{className:"note-list__item__title",children:e.title?e.title:"Untitled"}),Object(x.jsx)("div",{className:"note-list__item__body",children:e.body.includes(" ")?e.body.substr(0,75)+"...":"Empty note"}),Object(x.jsx)("button",{onClick:function(){return c(e.id)},className:"btn btn_del",children:Object(x.jsx)("img",{src:g,alt:""})})]},e.id)}))}),Object(x.jsxs)("div",{className:"note-list__footer",children:[Object(x.jsx)("button",{className:"btn btn_logout",onClick:h,children:Object(x.jsx)("img",{src:N,alt:"Logout"})}),Object(x.jsxs)("a",{href:"https://cheatsnake.github.io/",className:"label",children:["Made by ",Object(x.jsx)("b",{children:"Yury"})]})]})]})]})},k=n(14),C=n.n(k),S=function(){var e=Object(a.useState)([{id:h()(),title:"Welcome to Textnote",body:"Textnote is a simple text editor for creating text notes. This is an absolutely free app.\n\nThe source code of the application is available at the link\nhttps://github.com/cheatsnake",time:Date.now()}]),t=Object(b.a)(e,2),n=t[0],c=t[1],s=Object(a.useContext)(w).userId,r=Object(a.useState)(!1),i=Object(b.a)(r,2),o=i[0],l=i[1],p=Object(a.useState)(!0),O=Object(b.a)(p,2),m=O[0],v=O[1],g=Object(a.useState)(null),_=Object(b.a)(g,2),N=_[0],k=_[1],S=Object(a.useCallback)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("https://txtnote.herokuapp.com/api/note/add",{notes:n,userId:s},{headers:{"Content-Type":"application/json"}}).then((function(e){k(e.data._id)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),[n,s]),I=Object(a.useCallback)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("https://txtnote.herokuapp.com/api/note",{headers:{"Content-Type":"application/json"},params:{userId:s}}).then((function(e){e.data.length?(c(e.data[0].notes),k(e.data[0]._id)):s&&S()}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),[S,s]),T=Object(a.useCallback)(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.put("https://txtnote.herokuapp.com/api/note/update/".concat(t),{notes:n},{headers:{"Content-Type":"application/json"}}).then((function(e){return console.log(e)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[n]);Object(a.useEffect)((function(){I()}),[s]),Object(a.useEffect)((function(){localStorage.setItem("notes",JSON.stringify(n)),N&&T(N)}),[n,T,N]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(y,{notes:n,addNote:function(){var e={id:h()(),title:"Untitled",body:"",time:Date.now()};c([e].concat(Object(j.a)(n))),l(e.id)},delNote:function(e){if(!window.confirm("Do you really want to delete this note?"))return null;c(n.filter((function(t){return t.id!==e})))},active:o,setActive:l,menuActive:m,setMenuActive:function(){v(!m)}}),Object(x.jsx)(f,{activeNote:n.find((function(e){return e.id===o})),onEdit:function(e){var t=n.map((function(t){return t.id===o?e:t}));c(t)},menuActive:m})]})},I=(n(63),function(){var e=Object(o.g)(),t=Object(a.useState)(!1),n=Object(b.a)(t,2),s=n[0],r=n[1],l=Object(a.useState)(!1),j=Object(b.a)(l,2),p=j[0],h=j[1],f=Object(a.useState)({email:"",password:""}),v=Object(b.a)(f,2),g=v[0],_=v[1],N=Object(a.useContext)(w).login,y=function(e){_(Object(m.a)(Object(m.a)({},g),{},Object(O.a)({},e.target.name,e.target.value)))},k=function(){var t=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.post("https://txtnote.herokuapp.com/api/auth/reg",Object(m.a)({},g),{headers:{"Content-Type":"application/json"}});case 3:e.push("/"),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0),h(!0);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("https://txtnote.herokuapp.com/api/auth/log",Object(m.a)({},g),{headers:{"Content-Type":"application/json"}}).then((function(e){N(e.data.token,e.data.userId)}));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),r(!0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)(i.a,{children:Object(x.jsx)(o.d,{children:Object(x.jsx)(c.a.Fragment,{children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)(o.b,{path:"/log",children:Object(x.jsxs)("div",{className:"authPage",children:[Object(x.jsx)("h3",{children:"Log in"}),Object(x.jsxs)("form",{className:"form form_login",onSubmit:function(e){return e.preventDefault()},children:[Object(x.jsxs)("div",{className:"input__wrapper",children:[Object(x.jsx)("label",{htmlFor:"email",children:"Email"}),Object(x.jsx)("div",{className:"input",children:Object(x.jsx)("input",{type:"email",name:"email",required:!0,onChange:y})})]}),Object(x.jsxs)("div",{className:"input__wrapper",children:[Object(x.jsx)("label",{htmlFor:"password",children:"Password"}),Object(x.jsx)("div",{className:"input",children:Object(x.jsx)("input",{type:"password",name:"password",required:!0,onChange:y})})]}),Object(x.jsxs)("div",{className:"auth__wrapper",children:[Object(x.jsx)("button",{className:"btn_auth",onClick:S,children:"Login"}),Object(x.jsx)(i.b,{to:"/reg",className:"registration",children:"New User?"})]})]}),s?Object(x.jsx)("div",{className:"error",children:Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"Authorization error"}),". Please enter the correct data or create a new user."]})}):null]})}),Object(x.jsx)(o.b,{path:"/reg",children:Object(x.jsxs)("div",{className:"authPage",children:[Object(x.jsx)("h3",{children:"Create a new User"}),Object(x.jsxs)("form",{className:"form form_login",onSubmit:function(e){return e.preventDefault()},children:[Object(x.jsxs)("div",{className:"input__wrapper",children:[Object(x.jsx)("label",{htmlFor:"email",children:"Email"}),Object(x.jsx)("div",{className:"input",children:Object(x.jsx)("input",{type:"email",name:"email",required:!0,onChange:y})})]}),Object(x.jsxs)("div",{className:"input__wrapper",children:[Object(x.jsx)("label",{htmlFor:"password",children:"Password"}),Object(x.jsx)("div",{className:"input",children:Object(x.jsx)("input",{type:"password",name:"password",required:!0,onChange:y})})]}),Object(x.jsxs)("div",{className:"auth__wrapper",children:[Object(x.jsx)("button",{className:"btn_auth",onClick:k,children:"Sign up"}),Object(x.jsx)(i.b,{to:"/log",className:"registration",children:"Already registered?"})]})]}),p?Object(x.jsx)("div",{className:"error",children:Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"Registration error"}),". The user already exists or incorrect data is entered. Check the Email address you entered and make sure that the password contains at least 6 characters."]})}):null]})})]})})})})});n(69);var T=function(){var e=function(){var e=Object(a.useState)(null),t=Object(b.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),r=Object(b.a)(s,2),i=r[0],o=r[1],l=Object(a.useState)(!1),u=Object(b.a)(l,2),d=u[0],j=u[1],p=Object(a.useCallback)((function(e,t){c(e),o(t),localStorage.setItem("userData",JSON.stringify({userId:t,token:e}))}),[]);return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&p(e.token,e.userId),j(!0)}),[p]),{login:p,logout:function(){c(null),o(null),localStorage.removeItem("userData"),localStorage.removeItem("notes")},token:n,userId:i,isReady:d}}(),t=e.login,n=e.logout,c=e.token,s=e.userId,r=e.isReady,l=!!c,u=function(e){return e?Object(x.jsxs)(o.d,{children:[Object(x.jsx)(o.b,{path:"/",exact:!0,component:S}),Object(x.jsx)(o.a,{to:"/"})]}):Object(x.jsxs)(o.d,{children:[Object(x.jsx)(o.b,{path:"/log",exact:!0,component:I}),Object(x.jsx)(o.a,{to:"/log"})]})}(l);return Object(x.jsx)(w.Provider,{value:{login:t,logout:n,token:c,userId:s,isReady:r,isLogin:l},children:Object(x.jsx)("div",{className:"app",children:Object(x.jsx)(i.a,{children:u})})})};r.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(T,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.ed0a0fce.chunk.js.map